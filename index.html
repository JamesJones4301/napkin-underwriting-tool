
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Napkin Underwriting Tool</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-100 text-gray-900 p-6">
  <div class="max-w-3xl mx-auto bg-white shadow-lg rounded-xl p-8">
    <h1 class="text-3xl font-bold mb-4 text-center">üèòÔ∏è Napkin Underwriting Tool</h1>

    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
      <div>
        <label class="block font-medium">Number of Doors</label>
        <input id="doors" type="number" class="w-full border rounded p-2" value="0" />
      </div>
      <div>
        <label class="block font-medium">Asking Price ($)</label>
        <input id="asking" type="number" class="w-full border rounded p-2" value="0" />
      </div>
      <div>
        <label class="block font-medium">Offer Price ($)</label>
        <input id="offer" type="number" class="w-full border rounded p-2" value="0" />
      </div>
      <div>
        <label class="block font-medium">Annual Gross Income ($)</label>
        <input id="income" type="number" class="w-full border rounded p-2" value="0" />
      </div>
      <div>
        <label class="block font-medium">Annual Operating Expenses ($)</label>
        <input id="expenses" type="number" class="w-full border rounded p-2" value="0" />
      </div>
      <div>
        <label class="block font-medium">Cap Rate (%)</label>
        <input id="caprate" type="number" class="w-full border rounded p-2" value="8" step="0.01" />
      </div>
      <div>
        <label class="block font-medium">Rehab/CapEx ($)</label>
        <input id="rehab" type="number" class="w-full border rounded p-2" value="0" />
      </div>
      <div>
        <label class="block font-medium">LTV (%)</label>
        <input id="ltv" type="number" class="w-full border rounded p-2" value="70" />
      </div>
      <div>
        <label class="block font-medium">Interest Rate (%)</label>
        <input id="interest" type="number" class="w-full border rounded p-2" value="6.5" step="0.01" />
      </div>
    </div>

    <div class="mt-6 flex justify-center">
      <button onclick="analyze()" class="bg-blue-600 hover:bg-blue-700 text-white px-6 py-2 rounded font-semibold">
        Analyze Deal
      </button>
    </div>

    <div id="results" class="mt-8 bg-gray-50 p-4 rounded shadow hidden">
      <h2 class="text-xl font-bold mb-4">üìä Results</h2>
      <div id="metrics" class="space-y-2 text-gray-800"></div>
    </div>
  </div>

  <script>
    function analyze() {
      const doors = parseFloat(document.getElementById('doors').value);
      const asking = parseFloat(document.getElementById('asking').value);
      const offer = parseFloat(document.getElementById('offer').value);
      const income = parseFloat(document.getElementById('income').value);
      const expenses = parseFloat(document.getElementById('expenses').value);
      const caprate = parseFloat(document.getElementById('caprate').value) / 100;
      const rehab = parseFloat(document.getElementById('rehab').value);
      const ltv = parseFloat(document.getElementById('ltv').value) / 100;
      const interest = parseFloat(document.getElementById('interest').value) / 100;

      const noi = income - expenses;
      const estimatedValue = caprate ? noi / caprate : 0;
      const upside = ((estimatedValue - offer) / offer) * 100;
      const totalCost = offer + rehab;
      const loan = totalCost * ltv;
      const equity = totalCost - loan;
      const debtService = loan * interest;
      const dscr = debtService ? noi / debtService : 0;
      const cashFlow = noi - debtService;
      const coc = equity ? (cashFlow / equity) * 100 : 0;
      const valuePerDoor = doors ? estimatedValue / doors : 0;
      const offerPerDoor = doors ? offer / doors : 0;

      let grade = '‚ùå Bad Deal';
      if (upside >= 30 && dscr >= 1.25 && coc >= 10) {
        grade = 'üí∞ Great Deal';
      } else if (upside >= 20 && dscr >= 1.1) {
        grade = '‚úÖ Good Deal';
      } else if (upside >= 10) {
        grade = '‚ö†Ô∏è Needs Review';
      }

      const metrics = `
        NOI: $${noi.toFixed(2)}<br/>
        Value Estimate (@ ${caprate * 100}% cap): $${estimatedValue.toFixed(2)}<br/>
        Value per Door: $${valuePerDoor.toFixed(2)}<br/>
        Offer per Door: $${offerPerDoor.toFixed(2)}<br/>
        Upside: ${upside.toFixed(1)}%<br/>
        DSCR: ${dscr.toFixed(2)}<br/>
        Cash-on-Cash: ${coc.toFixed(1)}%<br/>
        <strong>Deal Grade: ${grade}</strong>
      `;

      document.getElementById('results').classList.remove('hidden');
      document.getElementById('metrics').innerHTML = metrics;
    }
  </script>
</body>
</html>
